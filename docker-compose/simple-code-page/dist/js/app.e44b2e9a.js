(function(e){function t(t){for(var n,o,r=t[0],i=t[1],c=t[2],m=0,p=[];m<r.length;m++)o=r[m],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);u&&u(t);while(p.length)p.shift()();return l.push.apply(l,c||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],n=!0,r=1;r<a.length;r++){var i=a[r];0!==s[i]&&(n=!1)}n&&(l.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},s={app:0},l=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],i=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=i;l.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"outer",attrs:{id:"app"}},[a("el-main",[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"项目生成"}},[a("el-row",[a("el-col",{attrs:{span:1.5}},[a("div",[e._v(" 请输入项目名称： ")])]),a("el-col",{attrs:{span:3}},[a("div",[a("el-input",{staticClass:"bg-purple",model:{value:e.projectName,callback:function(t){e.projectName=t},expression:"projectName"}})],1)]),a("el-col",{attrs:{span:6}},[a("div",[a("el-switch",{attrs:{"active-text":"创建基础文件","inactive-text":"不创建基础文件"},model:{value:e.createBasics,callback:function(t){e.createBasics=t},expression:"createBasics"}})],1)])],1),a("el-steps",{attrs:{space:200,active:e.active,"finish-status":"success"}},[a("el-step",{attrs:{title:"开始"}}),a("el-step",{attrs:{title:"获取表格"}}),a("el-step",{attrs:{title:"获取表格详情"}}),a("el-step",{attrs:{title:"创建文件完成"}})],1),a("el-button",{staticStyle:{"margin-top":"12px"},on:{click:e.next}},[e._v("下一步")]),a("el-collapse",{attrs:{accordion:""},model:{value:e.activeProject,callback:function(t){e.activeProject=t},expression:"activeProject"}},[a("el-collapse-item",{attrs:{title:"表信息",name:"1"}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选 ")]),a("el-checkbox-group",{on:{change:e.handleCheckedTableNamesChange},model:{value:e.checkedTableNames,callback:function(t){e.checkedTableNames=t},expression:"checkedTableNames"}},[a("el-row",e._l(e.tableNames,(function(t,n){return a("el-col",{key:n,attrs:{span:6}},[a("div",[a("el-checkbox",{attrs:{label:t.code}},[e._v(e._s(t.tableName))])],1)])})),1)],1)],1),a("el-collapse-item",{attrs:{title:"字段信息",name:"2"}},e._l(e.tableInfos,(function(t,n){return a("div",{key:n},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content-light ac"},[e._v("表名: "+e._s(t.tableNameTrans))])])],1),a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content ac"},[e._v("列名")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content ac"},[e._v("类型")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content ac"},[e._v("描述")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content ac"},[e._v("是否范围查询")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content ac"},[e._v("是否等于查询")])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content ac"})])],1),e._l(t.columns,(function(t,n){return a("el-row",{key:n},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content ac"},[a("el-input",{staticClass:"bg-purple",model:{value:t.columnNameTrans,callback:function(a){e.$set(t,"columnNameTrans",a)},expression:"column.columnNameTrans"}})],1)]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content ac"},[a("el-input",{model:{value:t.typeNameTrans,callback:function(a){e.$set(t,"typeNameTrans",a)},expression:"column.typeNameTrans"}})],1)]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content ac"},[e._v(e._s(t.remarks))])]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content ac"},[a("el-checkbox",{model:{value:t.columnRangeSearch,callback:function(a){e.$set(t,"columnRangeSearch",a)},expression:"column.columnRangeSearch"}},[e._v("range")])],1)]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content ac"},[a("el-checkbox",{model:{value:t.columnEqualSearch,callback:function(a){e.$set(t,"columnEqualSearch",a)},expression:"column.columnEqualSearch"}},[e._v("equal")])],1)]),a("el-col",{attrs:{span:4}},[a("div",{staticClass:"grid-content ac"})])],1)})),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-min-content-white "})])],1)],2)})),0)],1)],1),a("el-tab-pane",{attrs:{label:"Yml变量提取"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-s-tools"},on:{click:e.ymlExtract}},[e._v("转换")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-document-copy"},on:{click:e.copyYmlTransform}},[e._v("转换后的Yml配置")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-document-copy"},on:{click:e.copyEnvironmentVariable}},[e._v("提取的环境变量")]),a("el-collapse",{model:{value:e.activeYml,callback:function(t){e.activeYml=t},expression:"activeYml"}},[a("el-collapse-item",{attrs:{title:"yml配置",name:"1"}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"","before-upload":e.ymlAnalysis,action:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传yml文件，且不超过500kb")])])],1),a("el-collapse-item",{attrs:{title:"转换元素",name:"2"}},[[a("el-transfer",{attrs:{data:e.transferData},model:{value:e.transferKey,callback:function(t){e.transferKey=t},expression:"transferKey"}})]],2),a("el-collapse-item",{attrs:{title:"转换后的Yml配置",name:"3"}},[a("el-input",{attrs:{type:"textarea",rows:10,placeholder:"请输入内容"},model:{value:e.ymlTransform,callback:function(t){e.ymlTransform=t},expression:"ymlTransform"}})],1),a("el-collapse-item",{attrs:{title:"提取的环境变量",name:"4"}},[a("el-input",{attrs:{type:"textarea",rows:10,placeholder:"请输入内容"},model:{value:e.environmentVariable,callback:function(t){e.environmentVariable=t},expression:"environmentVariable"}})],1)],1)],1),a("el-tab-pane",{attrs:{label:"Word文件格式化"}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",multiple:"","before-upload":e.formatWordXml,action:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传xml文件，且不超过500kb")])])],1)],1)],1)],1)},l=[],o=(a("159b"),a("a15b"),a("2b3d"),a("d3b7"),a("3ca3"),a("ddb0"),{data:function(){return{active:0,activeProject:"1",activeYml:["1"],checkAll:!1,checked:!1,ymlFile:null,transferData:[],transferKey:[],ymlOriginal:"",ymlTransform:"",environmentVariable:"",tableNameOptions:[],checkedTableNames:[],tableNames:[],isIndeterminate:!0,tableInfos:[],input:"",projectName:"",createBasics:!1}},methods:{next:function(){0===this.active&&this.getAllTable(),1===this.active&&this.getSelectTable(),2===this.active&&this.createTableTrans(),this.active>3&&(this.active=0)},handleCheckAllChange:function(e){this.checkedTableNames=e?this.tableNameOptions:[],this.isIndeterminate=!1},handleCheckedTableNamesChange:function(e){var t=e.length;this.checkAll=t===this.tableNames.length,this.isIndeterminate=t>0&&t<this.tableNames.length},getAllTable:function(){var e=this;void 0!==this.projectName&&""!==this.projectName?this.$store.dispatch("showTable",{}).then((function(t){var a=t.list,n=[];a.forEach((function(e){n.push(e.code)})),e.tableNameOptions=n,e.tableNames=a||[],e.active++})):this.$notify.error({title:"错误",message:"请填写项目名称！！"})},getSelectTable:function(){var e=this;if(void 0!==this.checkedTableNames&&0!==this.checkedTableNames.length){var t=new FormData;t.append("tableCodes",this.checkedTableNames.join(",")),this.$store.dispatch("showColumn",{param:t}).then((function(t){var a=t.list;e.tableInfos=a||[],e.active++}))}else this.$notify.error({title:"错误",message:"请勾选需要生成的表！！"})},createTableTrans:function(){var e=this,t={projectName:this.projectName,createBasics:this.createBasics,tableTrans:this.tableInfos};this.$store.dispatch("getTableTrans",t).then((function(t){t.meta.success&&(e.active++,e.$notify({title:"成功",message:"生成成功了",type:"success"}))}))},ymlAnalysis:function(e){var t=this;this.ymlFile=e;var a=new FormData;a.append("file",e),this.$store.dispatch("ymlAnalysis",{param:a}).then((function(e){if(e.meta.success)for(var a=0;a<e.list.length;a++)t.transferData=e.list}))},ymlExtract:function(){var e=this;if(void 0!==this.ymlFile&&null!==this.ymlFile)if(void 0!==this.transferKey&&0!==this.transferKey.length){var t=new FormData;t.append("file",this.ymlFile),t.append("key",this.transferKey),this.$store.dispatch("ymlExtract",{param:t}).then((function(t){t.meta.success&&(e.ymlTransform=t.data.yml,e.environmentVariable=t.data.env)}))}else this.$notify.error({title:"错误",message:"请勾选需要转换的元素！！"});else this.$notify.error({title:"错误",message:"请上传文件！！"})},copyYmlTransform:function(){this.copyToClipboard(this.ymlTransform),this.$message.success("复制成功")},copyEnvironmentVariable:function(){this.copyToClipboard(this.environmentVariable),this.$message.success("复制成功")},copyToClipboard:function(e){window.clipboardData?window.clipboardData.setData("text",e):(function(e){document.oncopy=function(t){t.clipboardData.setData("text",e),t.preventDefault(),document.oncopy=null}}(e),document.execCommand("Copy"))},formatWordXml:function(e){var t=this;this.ymlFile=e;var a=new FormData;a.append("file",e),this.$store.dispatch("formatWordXml",{param:a}).then((function(e){var a=e.headers,n=a["content-type"];if(e.data){var s=new Blob([e.data],{type:n});t.downFile(s,"document.xml")}else console.error("响应异常：",e)}))},downFile:function(e,t){if("download"in document.createElement("a")){var a=document.createElement("a");a.href=window.URL.createObjectURL(e),a.download=t,a.style.display="none",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(a.href),document.body.removeChild(a)}else window.navigator.msSaveBlob(e,t)}}}),r=o,i=(a("034f"),a("2877")),c=Object(i["a"])(r,s,l,!1,null,null,null),u=c.exports,m=a("2f62"),p=a("5c96"),d=a.n(p),f=(a("0fae"),a("bc3a")),h=a.n(f);function v(){return h.a.defaults.withCredentials=!0,h.a.defaults.timeout=6e4,h.a.interceptors.response.use((function(e){if(e.status>=200&&e.status<400){if(e.data.meta&&[3001,3002,3003].indexOf(e.data.meta.code)>=0)return;return e}return Promise.reject(e)}),(function(e){return Promise.reject(e)})),{post:function(e,t){var a=this;return new Promise((function(n,s){h.a.post(e,t,{responseType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){e.data.meta.success?n(e.data):a.$notify.error({title:"错误",message:e.data.message})})).catch((function(e){a.$notify.error({title:"错误",message:"系统错误"}),s(e)}))}))},postDown:function(e,t){var a=this;return new Promise((function(n,s){h.a.post(e,t,{responseType:"blob",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){n(e)})).catch((function(e){a.$notify.error({title:"错误",message:"系统错误"}),s(e)}))}))},postJSON:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,s){h.a.post(e,a,{responseType:"json",headers:{"Content-Type":"application/json"}}).then((function(e){e.data.meta.success?n(e.data):t.$notify.error({title:"错误",message:e.data.message})})).catch((function(e){s(e.data)}))}))}}}var b=v();function y(e){return b.post("/api/table/showTable",e)}function g(e){return b.post("/api/table/showColumn",e)}function w(e){return b.postJSON("/api/table/getTableTrans",e)}function T(e){return b.post("/api/yml/ymlAnalysis",e)}function k(e){return b.post("/api/yml/ymlExtract",e)}function C(e){return b.postDown("/api/format/formatWordXml",e)}var x={showColumn:function(e,t){var a=e.commit,n=t.param;return console.log(a),g(n).then((function(e){return e}))},showTable:function(e,t){var a=e.commit,n=t.param;return console.log(a),y(n).then((function(e){return e}))},getTableTrans:function(e,t){var a=e.commit;return console.log(a),w(t).then((function(e){return e}))},ymlAnalysis:function(e,t){var a=e.commit,n=t.param;return console.log(a),T(n).then((function(e){return e}))},ymlExtract:function(e,t){var a=e.commit,n=t.param;return console.log(a),k(n).then((function(e){return e}))},formatWordXml:function(e,t){var a=e.commit,n=t.param;return console.log(a),C(n).then((function(e){return e}))}};function _(){return new m["a"].Store({actions:x})}n["default"].use(m["a"]),n["default"].config.productionTip=!1,n["default"].use(m["a"]),n["default"].use(d.a);var N=_();new n["default"]({store:N,render:function(e){return e(u)}}).$mount("#app")},"85ec":function(e,t,a){}});
//# sourceMappingURL=app.e44b2e9a.js.map